<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Usrs data</title>
</head>
<body>
    <div class="demo">

    </div>
<script type="text/javascript">
    /*
      Q: Find the developers from around the world AND get the desgination which has isActive: true
      Our result should be something like
      Result: [ { country: "country name",  person_name:"name", currentJob: "designation "}]
      In simple words, We need to fetch the developers data with their current designation.
   */
let fetchUserData = "./developer-data.json"; // access Json data base form an extrenal file 
// This function will read the user object and get the results based on passed parameters
function findActiveDeveloper(countrysInfo, target) {
   let result = [] // create an empty array
   for (const country in countrysInfo) { // get all keys in the object
      let countryName = ``,developerName = ``, cruntJob = []; // store filtered data 
      for (let i = 0; i < countrysInfo[country].length; i++) { // get data from the nested array
         const eachCountryData = countrysInfo[country][i];
         if (eachCountryData.position === target) { // filter result based on the target parameter passed
            countryName = country // get country name
            developerName = eachCountryData.name // get developer name
            eachCountryData.jobs.filter(job => {
               if(job.isActive === true )
                  cruntJob.push(job.designation)
               })
            if (developerName && countryName && cruntJob.length > 0) {
               let developerDetails = {
                  "Person Name": developerName,
                  "Country Name": countryName,
                  "Current Job": cruntJob
               } // create an object based on filtered data
               result.push(developerDetails) // push the output object in an array
            }
         } 
         
      }
      
   }
   return console.log(result)
} 
fetch(fetchUserData)
   .then(response => response.json()) // Parse the response as JSON
   .then(userData => {
      /* function calling 
         the first parameter is an object of developer data 
         the secound parameter is position 
      */
      findActiveDeveloper(userData, "Developer")
   }) 
   .catch(error => console.error(error)); // Handle any errors 

    </script>
</body>
</html>